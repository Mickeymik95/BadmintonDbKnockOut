<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<title>Double Elimination Pro</title>

<style>
:root{
--menang:#2ecc71;--kalah:#e74c3c;--utama:#00d2ff;
--emas:#ffd700;--bg:#0b0b0d;--kad:#1a1a1f;
}
body{
font-family:Segoe UI,sans-serif;
background:var(--bg);color:#fff;margin:0;padding:20px;
display:flex;flex-direction:column;align-items:center;
}
.kawalan{
background:var(--kad);padding:15px;border-radius:12px;
display:flex;gap:15px;align-items:center;
position:sticky;top:10px;z-index:99;
border:1px solid #333;
}
input,button{
background:#000;color:#fff;border:1px solid #444;
border-radius:6px;padding:6px;
}
button{background:var(--utama);color:#000;font-weight:bold;cursor:pointer}
button:hover{background:#fff}
.outer-wrapper{width:100%;overflow-x:auto;padding:20px}

.tournament-container{
display:grid;
grid-template-columns:auto 280px;
gap:40px;
align-items:center;
}
.bracket-main{
display:flex;
flex-direction:column;
gap:140px;
}
.laluan-row{display:flex;gap:40px}
.pusingan{display:flex;flex-direction:column;gap:25px;min-width:220px}
.tajuk-pusingan{
font-size:.75rem;color:var(--utama);
border-bottom:2px solid #333;text-align:center;
padding-bottom:5px;
}
.kotak-perlawanan{
background:var(--kad);
border:1px solid #333;border-radius:8px;
overflow:hidden;
}
.id-perlawanan{
font-size:.65rem;padding:5px 10px;
background:#25252b;color:#aaa;
}
.slot-pasukan{
display:flex;justify-content:space-between;
align-items:center;padding:8px;
border-bottom:1px solid #222;
}
.slot-pasukan:last-child{border-bottom:none}
input[type=text]{width:120px}
.skor{width:35px;text-align:center}
.teks-menang{color:var(--menang);font-weight:bold}
.teks-kalah{color:var(--kalah);opacity:.5;text-decoration:line-through}
.skor-menang{background:var(--menang);color:#fff}

.grand-final-wrap{
display:flex;justify-content:center;align-items:center;
height:100%;
}
.grand-final{
border:2px solid var(--emas);
box-shadow:0 0 25px rgba(255,215,0,.25)
}
.grand-final .id-perlawanan{
background:var(--emas);color:#000;font-weight:bold
}
</style>
</head>

<body>

<div class="kawalan">
<label>Jumlah Pasukan</label>
<input type="number" id="bilPasukan" value="8" step="2" min="4">
<button onclick="jana()">Reset & Jana</button>
</div>

<div class="outer-wrapper">
<div class="tournament-container">

<div class="bracket-main">
<section>
<h3>üèÜ Winners</h3>
<div id="barisW" class="laluan-row"></div>
</section>

<section>
<h3>üíÄ Losers</h3>
<div id="barisL" class="laluan-row"></div>
</section>
</div>

<div class="grand-final-wrap">
<div id="grandFinal"></div>
</div>

</div>
</div>

<script>
function jana(){
barisW.innerHTML='';barisL.innerHTML='';grandFinal.innerHTML='';
const n=parseInt(bilPasukan.value);
const pLen=Math.ceil(Math.log2(n));

for(let p=0;p<pLen;p++){
let col=document.createElement('div');
col.className='pusingan';
col.innerHTML=`<div class="tajuk-pusingan">W R${p+1}</div>`;
for(let m=0;m<2**(pLen-p-1);m++) col.appendChild(kotak('W',p,m));
barisW.appendChild(col);
}

let lTotal=(pLen-1)*2;
for(let p=0;p<lTotal;p++){
let col=document.createElement('div');
col.className='pusingan';
col.innerHTML=`<div class="tajuk-pusingan">L R${p+1}</div>`;
for(let m=0;m<2**Math.floor((lTotal-p-1)/2);m++)
col.appendChild(kotak('L',p,m));
barisL.appendChild(col);
}

grandFinal.appendChild(kotak('GF',0,0,true));
}

function kotak(j,p,m,gf=false){
const id=`${j}_${p}_${m}`;
let div=document.createElement('div');
div.className='kotak-perlawanan'+(gf?' grand-final':'');
div.id=id;

const isi=(j==='W'&&p===0);
const n1=isi?`<input id="${id}_p1">`:`<span id="${id}_p1">Menunggu</span>`;
const n2=isi?`<input id="${id}_p2">`:`<span id="${id}_p2">Menunggu</span>`;

div.innerHTML=`
<div class="id-perlawanan">${gf?'üèÜ GRAND FINAL':id}</div>
<div class="slot-pasukan">${n1}<input class="skor" oninput="kemaskini('${id}')"></div>
<div class="slot-pasukan">${n2}<input class="skor" oninput="kemaskini('${id}')"></div>
`;
return div;
}

function kemaskini(id){
let box=document.getElementById(id);
let s=box.querySelectorAll('.skor');
if(!s[0].value||!s[1].value)return;

let n1=document.getElementById(id+'_p1');
let n2=document.getElementById(id+'_p2');

let nama1=n1.value||n1.innerText;
let nama2=n2.value||n2.innerText;

let menang=s[0].value>s[1].value?nama1:nama2;
let kalah =s[0].value>s[1].value?nama2:nama1;

n1.className=s[0].value>s[1].value?'teks-menang':'teks-kalah';
n2.className=s[1].value>s[0].value?'teks-menang':'teks-kalah';
s[0].className=s[0].value>s[1].value?'skor skor-menang':'skor';
s[1].className=s[1].value>s[0].value?'skor skor-menang':'skor';

let [j,p,m]=id.split('_');p=+p;m=+m;

if(j==='W'){
let nextW=document.getElementById(`W_${p+1}_${Math.floor(m/2)}_p${m%2?2:1}`);
if(nextW) nextW.innerText=menang;

let lp=p===0?0:p*2-1;
let nextL=document.getElementById(`L_${lp}_${m}_p1`);
if(nextL) nextL.innerText=kalah;
}

if(j==='L'){
let np=p+1;
let nm=p%2===0?m:Math.floor(m/2);
let ns=p%2===0?'p1':(m%2?'p2':'p1');
let next=document.getElementById(`L_${np}_${nm}_${ns}`);
if(next) next.innerText=menang;
else document.getElementById('GF_0_0_p2').innerText=menang;
}
}
jana();
</script>

</body>
</html>